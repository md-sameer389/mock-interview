<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Mock Interview Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/admin.css">
    <!-- Chart.js for Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h2>MOCK<span>.ai</span></h2>
            </div>

            <nav class="nav-menu">
                <a href="#" class="nav-item active" onclick="navigateTo('view-dashboard', this)">
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" onclick="navigateTo('view-students', this)">
                    <span>Students</span>
                </a>
                <a href="#" class="nav-item" onclick="navigateTo('view-analytics', this)">
                    <span>Analytics</span>
                </a>
                <a href="#" class="nav-item" onclick="navigateTo('view-reports', this)">
                    <span>Reports</span>
                </a>
                <a href="#" class="nav-item" onclick="navigateTo('view-drives', this)">
                    <span>Placement Drives</span>
                </a>
                <a href="#" class="nav-item" onclick="navigateTo('view-settings', this)">
                    <span>Settings</span>
                </a>
                <a href="index.html" class="nav-item" style="color: #ff6b6b; margin-top: auto;">
                    <span>Logout</span>
                </a>
            </nav>

            <div class="user-profile">
                <div class="avatar">A</div>
                <div class="user-info">
                    <span class="name">Admin User</span>
                    <span class="role">Super Admin</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">

            <!-- VIEW: DASHBOARD -->
            <section id="view-dashboard" class="view-section">
                <div class="header">
                    <div>
                        <h1>Dashboard Overview</h1>
                        <p style="color: var(--text-dim);">Welcome back, Admin</p>
                    </div>
                    <div style="font-size: 0.9rem; color: var(--text-dim);" id="current-date">
                        Oct 25, 2023
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon"
                            style="background: rgba(108, 93, 211, 0.1); padding: 12px; border-radius: 12px; color: var(--primary);">
                            <!-- Icon placeholder -->
                            üë•
                        </div>
                        <div class="stat-info">
                            <h3>Total Candidates</h3>
                            <div class="stat-value" id="stat-candidates">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"
                            style="background: rgba(0, 210, 255, 0.1); padding: 12px; border-radius: 12px; color: var(--secondary);">
                            üìù
                        </div>
                        <div class="stat-info">
                            <h3>Interviews Taken</h3>
                            <div class="stat-value" id="stat-interviews">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"
                            style="background: rgba(255, 159, 67, 0.1); padding: 12px; border-radius: 12px; color: #ff9f43;">
                            ‚≠ê
                        </div>
                        <div class="stat-info">
                            <h3>Avg. Score</h3>
                            <div class="stat-value" id="stat-avg-score">0.0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"
                            style="background: rgba(76, 209, 55, 0.1); padding: 12px; border-radius: 12px; color: #4cd137;">
                            üöÄ
                        </div>
                        <div class="stat-info">
                            <h3>Placement Ready</h3>
                            <div class="stat-value" id="stat-readiness">0%</div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="activity-section">
                    <div class="section-header">
                        <h3>Recent Interview Activity</h3>
                        <a href="#" class="view-all"
                            onclick="navigateTo('view-students', document.querySelectorAll('.nav-item')[1])">View
                            All</a>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Candidate</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Questions</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody id="activity-table-body">
                            <!-- Populated by JS -->
                            <tr>
                                <td colspan="5" style="text-align:center;">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- VIEW: STUDENTS -->
            <section id="view-students" class="view-section" style="display: none;">
                <div class="header">
                    <h1>Student Performance</h1>
                </div>
                <div class="activity-section">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Sessions</th>
                                <th>Avg. Score</th>
                                <th>Last Active</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="students-table-body">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- VIEW: ANALYTICS -->
            <section id="view-analytics" class="view-section" style="display: none;">
                <div class="header">
                    <h1>Platform Analytics</h1>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                    <div class="activity-section">
                        <div class="section-header">
                            <h3>Skill Proficiency</h3>
                        </div>
                        <div style="height: 300px;">
                            <canvas id="chart-skills"></canvas>
                        </div>
                    </div>

                    <div class="activity-section">
                        <div class="section-header">
                            <h3>Interview Frequency</h3>
                        </div>
                        <div style="height: 300px;">
                            <canvas id="chart-activity"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: REPORTS -->
            <section id="view-reports" class="view-section" style="display: none;">
                <div class="header">
                    <h1>Reported Issues</h1>
                </div>
                <div class="activity-section">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Student</th>
                                <th>Question</th>
                                <th>Reason</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="reports-table-body">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- VIEW: DRIVES -->
            <section id="view-drives" class="view-section" style="display: none;">
                <div class="header">
                    <h1>Placement Drives</h1>
                    <button class="btn-refresh" style="background: var(--primary); color: white;"
                        onclick="openDriveModal()">+ Post New Drive</button>
                </div>

                <div class="drives-grid" id="drives-list">
                    <!-- Populated by JS -->
                    <p>Loading drives...</p>
                </div>
            </section>

            <!-- VIEW: SETTINGS -->
            <section id="view-settings" class="view-section" style="display: none;">
                <div class="header">
                    <h1>System Settings</h1>
                </div>

                <div class="activity-section">
                    <h3>Data Management</h3>
                    <p style="color: var(--text-dim); margin: 10px 0 20px 0;">Manage system data and resets.</p>

                    <button class="btn-refresh" style="border-color: #ff4757; color: #ff4757;"
                        onclick="handleSystemReset()">
                        ‚ö†Ô∏è Reset All System Data
                    </button>
                    <p style="font-size: 0.8rem; color: #ff6b6b; margin-top: 8px;">
                        This will delete all student records, interview feedback, and history. Cannot be undone.
                    </p>
                </div>
            </section>

        </main>
    </div>

    <!-- MODAL: CREATE DRIVE -->
    <div id="drive-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Post New Placement Drive</h3>
                <button class="close-modal" onclick="closeDriveModal()">&times;</button>
            </div>
            <form id="create-drive-form" onsubmit="handleCreateDrive(event)">
                <div style="display: flex; flex-direction: column; gap: 16px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim);">Company Name</label>
                        <input type="text" id="drive-company" class="search-box" style="width: 100%;" required
                            placeholder="e.g. Google">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim);">Role</label>
                        <input type="text" id="drive-role" class="search-box" style="width: 100%;" required
                            placeholder="e.g. Software Engineer">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim);">Required Skills
                            (comma sep)</label>
                        <input type="text" id="drive-skills" class="search-box" style="width: 100%;"
                            placeholder="e.g. Python, React, SQL">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim);">Date</label>
                        <input type="date" id="drive-date" class="search-box" style="width: 100%;" required>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim);">Description</label>
                        <textarea id="drive-desc" class="search-box" style="width: 100%; height: 100px; resize: none;"
                            placeholder="Job details..."></textarea>
                    </div>
                    <button type="submit" class="btn-refresh"
                        style="background: var(--primary); color: white; width: 100%; margin-top: 16px;">Post
                        Drive</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL: STUDENT DETAILS -->
    <div id="student-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-student-name">Student Name</h3>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <p id="modal-student-email" style="color: var(--text-dim); margin-bottom: 20px;">email@example.com</p>

            <h4>Interview History</h4>
            <table class="data-table" style="margin-top: 12px;">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Score</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="modal-history-body">
                    <!-- Populated by JS -->
                </tbody>
            </table>
        </div>
    </div>

    <script src="js/main.js?v=2"></script>
    <!-- Report Details Modal -->
    <div id="report-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Report Details</h2>
                <button class="close-modal" onclick="closeReportModal()">&times;</button>
            </div>
            <div class="modal-body" id="report-modal-body">
                <!-- Populated by JS -->
            </div>
            <div style="margin-top: 20px; text-align: right;">
                <button class="btn-refresh" onclick="closeReportModal()">Close</button>
            </div>
        </div>
    </div>

    <script src="js/admin.js?v=2"></script>
</body>

</html>